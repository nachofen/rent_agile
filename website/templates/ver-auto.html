{% extends "base.html" %}
{% block title %} Detalles del Vehículo {% endblock %}

{% block content %}
<link rel="stylesheet" type="text/css" href="/static/css/style.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightbox2/dist/css/lightbox.min.css">
<script src="https://cdn.jsdelivr.net/npm/lightbox2/dist/js/lightbox-plus-jquery.min.js"></script>

<!-- Agregar la biblioteca de selección de fecha (DatePicker) -->
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<!-- en navegador /ver-vehiculo   -->
<br>
<body class="custom-background-ver">

<div class="car-details-container">
  
  <div class="buttons-container">
    {% if current_user.id == vehiculo.usuario_id %}
    <br>
    <h4> Tus Autos Disponibles</h4>
    <h6> Edita y Borra</h6>

    <h3 class="car-title">{{ vehiculo.marca }} {{ vehiculo.modelo }}</h3>
    <form action="/editar-vehiculo/{{ vehiculo.id_auto }}" method="GET">
      <button type="submit" class="btn btn-primary-ver">Editar Vehículo</button>
    </form><br>
    <form action="/delete-vehiculo/{{ vehiculo.id_auto }}" method="POST" onsubmit="return confirm('¿Estás seguro de que deseas eliminar este vehículo?')">
     
      <button type="submit" class="btn btn-danger">Borrar Vehículo</button> 
      <br><hr>
    </form> 
    {% else %}
    <div class="message-rent-container">
      <h3> Reserva y Descubre Nuevos Destinos</h3>
    </div>
    <br>

    <br>  
      <h3 class="car-title">{{ vehiculo.marca }} {{ vehiculo.modelo }}</h3>

      <div id="fecha-fields">
        <h6>Selecciona las Fechas de Reserva</h6>
        <form action="/alquilar-vehiculo/{{ vehiculo.id_auto }}" method="POST">
          <div class="date-containero">
            <div class="form-group">
              <input type="text" id="fecha_inicio" name="fecha_inicio" placeholder="Fecha Inicio" required>
            </div>
            &nbsp; &nbsp;
            <div class="form-group">
              <input type="text" id="fecha_fin" name="fecha_fin" placeholder="Fecha de Fin" required>
            </div>
          </div>
          <div class="button-container">
          <button type="submit" class="btn btn-primary-ver">Alquilar</button>
          </form>
          <form action="/enviar-mensaje/{{ vehiculo.id_auto }}" method="get">
            <button type="submit" class="btn btn-primary-ver">Enviar mensaje</button>
          </form>
        </div>
      </div>
      <br>

   {% endif %}
 <!-- Tarjeta de detalles de vehículo (puedes repetir esto para cada vehículo) -->
 <div class="car-card">
  <h4>Características del Auto</h4>
  <ul>
    <li><strong>Año:</strong> {{ vehiculo.año }}</li>
    <li><strong>Categoría:</strong> {{ vehiculo.categoria }}</li>
    <li><strong>Departamento:</strong> {{ vehiculo.departamento }}</li>
    <li><strong>Tarifa:</strong> {{ vehiculo.tarifa }}$</li>
  </ul>
          <!-- Contenedor para las imágenes y tarjetas de detalles de vehículos -->
        <div class="car-image-gallery">
          <ul class="image-gallery">
            {% for imagen in imagenes_url %}
            <li>
              <a href="/{{ imagen }}" data-lightbox="gallery">
                <img src="/{{ imagen }}" alt="Imagen del Auto" class="lightbox">
              </a>
            </li>
            {% endfor %}
          </ul>
        </div>
        </div>

        <script>
          // Inicializar el selector de fecha en los campos de fecha de inicio y fecha de finalización
          $(document).ready(function() {
            const fechaInicioInput = $("#fecha_inicio");
            const fechaFinInput = $("#fecha_fin");
            
            fechaInicioInput.datepicker({
                dateFormat: 'yy-mm-dd',
                onClose: function(selectedDate) {
                  fechaFinInput.datepicker("option", "minDate", selectedDate);
                  fechaFinInput.focus(); // Enfocar automáticamente el campo de fecha de finalización
                }
            });
            fechaFinInput.datepicker({
                dateFormat: 'yy-mm-dd',
                minDate: 0
            });
          });

          // No es necesario el botón "seleccionar-fechas", ya que los campos de fecha abren el calendario al hacer clic en ellos.

          lightbox.option({
            'resizeDuration': 200,
            'wrapAround': true
          });
        </script>
<br><br><br><br><br><br>
<br><br><br><br><br>
<br><br><br>
<br><br>
<br>
<!-- Footer -->
<footer class="footer">
  <p>Conduciendo hacia tus sueños desde 2023 </p>
  <br>
  <a href="/info#quienes-somos">Quiénes Somos</a> | <a href="/info#testimonios">Testimonios</a> | <a href="/info#contacto">Contacto</a>
  <small>Tu auto, tu aventura.</small>
  <p>&copy; 2023 Rent Agile</p>
</footer>
</body>
{% endblock %}